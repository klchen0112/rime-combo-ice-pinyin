# Rime schema
# encoding: utf-8

schema:
  schema_id: combo_pinyin_split
  name: å®®ä¿æ‹¼éŸ³Â·å…«æŒ‡ç¦ª
  version: '3.0'
  author:
    - å±…æˆæ° <chen.sst@gmail.com>
  description: |
    ä¸¦æ“Šè¼¸å…¥æ‹¼éŸ³ã€‚
    å°ˆçˆ²åˆ†é«”å¼æˆ–æœ‰æ‹†åˆ†ç©ºæ ¼è¨­è¨ˆçš„éµç›¤å„ªåŒ–ï¼Œå·¦å³æ‰‹æ‹‡æŒ‡å„å¸ä¸€éµä»¥åˆ©ä¸¦æ“Šã€‚
  dependencies:
    - rime_frost

switches:
  - name: ascii_mode
    reset: 0
    states: [ä¸­æ–‡, è¥¿æ–‡]
  - name: full_shape
    states: [åŠè§’, å…¨è§’]
  - name: traditionalization
    states: [ç®€, ç¹]
    reset: 0
  - name: ascii_punct
    states: [ã€‚ï¼Œ, ï¼ï¼Œ]
  - name: emoji
    states: [ğŸ’€, ğŸ˜„]
    reset: 1
  - name: kaomoji
    states: [ ï¿£ã¸ï¿£, (uâ€¿à¸ºuâœ¿à¸º) ]
    reset: 1

engine:
  processors:
    - lua_processor@select_character          # ä»¥è¯å®šå­—
    - ascii_composer #
    - recognizer
    - chord_composer # å¯¦ç¾ä¸¦æ“ŠæŒ‰éµè™•ç†
    - key_binder
    - speller
    - punctuator
    - selector
    - navigator
    - express_editor
  segmentors:
    - ascii_segmentor
    - matcher
    - abc_segmentor
    - punct_segmentor
    - fallback_segmentor
  translators:
    - punct_translator
    - script_translator
  filters:
    - lua_filter@*is_in_user_dict # ç”¨æˆ·è¯å…¸çš„è¯åŠ ä¸Šä¸€ä¸ª*
    - lua_filter@corrector                          # é”™éŸ³é”™å­—æç¤º
    - lua_filter@long_word_filter                   # é•¿è¯ä¼˜å…ˆï¼ˆé¡ºåºè¦æ±‚ï¼šé•¿è¯ä¼˜å…ˆ > Emojiï¼‰
    - simplifier@traditionalize # ç®€ç¹åˆ‡æ¢
    - simplifier@emoji # Emoji
    - simplifier@kaomoji                            # é¢œæ–‡å­—
    - uniquifier

chord_composer:

editor:
  bindings:
    BackSpace: back_syllable

## Lua é…ç½®ï¼šé•¿è¯ä¼˜å…ˆ
## æå‡ count ä¸ªè¯è¯­ï¼Œæ’å…¥åˆ°ç¬¬ idx ä¸ªä½ç½®ã€‚
## ç¤ºä¾‹ï¼šå°† 2 ä¸ªè¯æ’å…¥åˆ°ç¬¬ 4ã€5 ä¸ªå€™é€‰é¡¹ï¼Œè¾“å…¥ jie å¾—åˆ°ã€Œ1æ¥ 2è§£ 3å§ 4é¥¥é¥¿ 5ææ¶ã€
long_word_filter:
  count: 2
  idx: 4


speller:
  alphabet: "zyxwvutsrqponmlkjihgfedcba'"
  initials: "zyxwvutsrqponmlkjihgfedcba"
  delimiter: " "
  algebra:
    # åˆä½µéŸ³ç¯€
    - derive/^lo$/lou/
    # åˆä½µ âŸ¨o / ouâŸ©ã€âŸ¨e / eiâŸ©å…©çµ„éŸ»æ¯
    #- derive/^([bpmf])?ou$/$1o/
    #- derive/^([zcsr]h?)?ei$/$1e/
    # æ‹¼éŸ³éŸ³ç¯€ä¸€å¾‹å¾ŒåŠ éš”éŸ³ç¬¦è™Ÿï¼Œé¿å…éŸ³ç¯€åˆ‡åˆ†æ­§ç¾©
    - "xform/^([a-z]+)$/$1'/"

translator:
  dictionary: rime_frost
  prism: combo_pinyin
  preedit_format:
    - xform/([nl])v/$1Ã¼/
    - xform/([nl])ue/$1Ã¼e/
    - xform/([jqxy])v/$1u/
    - "xform/' /'/"

punctuator:
  import_preset: default

key_binder:
  import_preset: default

recognizer:
  import_preset: default

__patch:
  # é»˜èªé…ç½®çˆ²å…¼å®¹ä½ˆå±€ã€‚
  - combo_pinyin_layouts:/use_split_layout
  # æ¨™æº–éµç›¤å·¦æ‰‹å°æŒ‡å­—æ¯ A éµç•¶ä½œå®®ä¿æ‹¼éŸ³ç¢¼ Hã€‚
  # å¯ç·¨ç¨‹éµç›¤é ˆè¨­æ‹‡æŒ‡å·¦éµçˆ²å­—æ¯ Aã€‚
  # æˆ–è€…è§£å°ä¸‹åˆ—è¨»é‡‹è¡Œä¹‹ä¸€ï¼Œé¸å®šå·¦æ‰‹æ‹‡æŒ‡ H éµæ‰€ç”¨çš„éµç¢¼ï¼š
  # æ‹‡æŒ‡å·¦éµè¨­çˆ²åˆ†è™Ÿ
  # - combo_pinyin_layouts:/use_semicolon
  # æ‹‡æŒ‡å·¦éµè¨­çˆ²å–®å¼•è™Ÿ
  # - combo_pinyin_layouts:/use_apostrophe
  # æ‹‡æŒ‡å·¦éµè¨­çˆ² Control
  - combo_pinyin_layouts:/use_control
  # æ‹‡æŒ‡å·¦éµè¨­çˆ² Alt
  # - combo_pinyin_layouts:/use_alt
  # æ‹‡æŒ‡å·¦éµè¨­çˆ² Shift
  # - combo_pinyin_layouts:/use_shift
  # å›è»Šéµä¸Šå±æŒ‰éµåºåˆ—
  - combo_pinyin_layouts:/use_return_to_commit_raw_input
  # å›è»Šéµç¢ºèªç•¶å‰å€™é¸
  # - combo_pinyin_layouts:/use_return_to_confirm

  # ä½¿ç”¨å…«è‚¡æ–‡èªè¨€æ¨¡å‹
  - grammar:/amz?
  - emoji:/emoji?
  - kaomoji:/kaomoji?
  - traditionalize:/s2t?

