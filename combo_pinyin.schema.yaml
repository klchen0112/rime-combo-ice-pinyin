# Rime schema
# encoding: utf-8

schema:
  schema_id: combo_pinyin
  name: å®®ä¿æ‹¼éŸ³
  version: "3.0"
  author:
    - å±…æˆæ° <chen.sst@gmail.com>
  description: |
    ä¸¦æ“Šè¼¸å…¥æ‹¼éŸ³
    https://github.com/rime/home/wiki/ComboPinyin
  dependencies:
    - rime_ice

switches:
  - name: ascii_mode
    reset: 0
    states: [ä¸­æ–‡, è¥¿æ–‡]
  - name: full_shape
    states: [åŠè§’, å…¨è§’]
  - name: traditionalization
    states: [ç®€, ç¹]
    reset: 0
  - name: ascii_punct
    states: [ã€‚ï¼Œ, ï¼ï¼Œ]
  - name: emoji
    states: [ğŸ’€, ğŸ˜„]
    reset: 1
  - name: kaomoji
    states: [ ï¿£ã¸ï¿£, (uâ€¿à¸ºuâœ¿à¸º) ]
    reset: 1
engine:
  processors:
    - lua_processor@select_character          # ä»¥è¯å®šå­—
    - ascii_composer #
    - recognizer
    - chord_composer # å¯¦ç¾ä¸¦æ“ŠæŒ‰éµè™•ç†
    - key_binder
    - speller
    - punctuator
    - selector
    - navigator
    - express_editor
  segmentors:
    - ascii_segmentor
    - matcher
    - abc_segmentor
    - punct_segmentor
    - fallback_segmentor
  translators:
    - punct_translator
    - script_translator
  filters:
    - lua_filter@*is_in_user_dict # ç”¨æˆ·è¯å…¸çš„è¯åŠ ä¸Šä¸€ä¸ª*
    - lua_filter@corrector                          # é”™éŸ³é”™å­—æç¤º
    - lua_filter@long_word_filter                   # é•¿è¯ä¼˜å…ˆï¼ˆé¡ºåºè¦æ±‚ï¼šé•¿è¯ä¼˜å…ˆ > Emojiï¼‰
    - simplifier@traditionalize # ç®€ç¹åˆ‡æ¢
    - simplifier@emoji # Emoji
    - simplifier@kaomoji                            # é¢œæ–‡å­—
    - uniquifier

chord_composer:

editor:
  bindings:
    BackSpace: back_syllable

# Lua é…ç½®ï¼šé•¿è¯ä¼˜å…ˆ
# æå‡ count ä¸ªè¯è¯­ï¼Œæ’å…¥åˆ°ç¬¬ idx ä¸ªä½ç½®ã€‚
# ç¤ºä¾‹ï¼šå°† 2 ä¸ªè¯æ’å…¥åˆ°ç¬¬ 4ã€5 ä¸ªå€™é€‰é¡¹ï¼Œè¾“å…¥ jie å¾—åˆ°ã€Œ1æ¥ 2è§£ 3å§ 4é¥¥é¥¿ 5ææ¶ã€
long_word_filter:
  count: 2
  idx: 4


speller:
  alphabet: "zyxwvutsrqponmlkjihgfedcba'"
  initials: "zyxwvutsrqponmlkjihgfedcba"
  delimiter: " "
  algebra:
    # åˆä½µéŸ³ç¯€
    - derive/^lo$/lou/
    # åˆä½µ âŸ¨o / ouâŸ©ã€âŸ¨e / eiâŸ©å…©çµ„éŸ»æ¯
    #- derive/^([bpmf])?ou$/$1o/
    #- derive/^([zcsr]h?)?ei$/$1e/
    # æ‹¼éŸ³éŸ³ç¯€ä¸€å¾‹å¾ŒåŠ éš”éŸ³ç¬¦è™Ÿï¼Œé¿å…éŸ³ç¯€åˆ‡åˆ†æ­§ç¾©
    - "xform/^([a-z]+)$/$1'/"


translator:
  dictionary: rime_frost
  prism: combo_pinyin
  preedit_format:
    - xform/([nl])v/$1Ã¼/
    - xform/([nl])ue/$1Ã¼e/
    - xform/([jqxy])v/$1u/
    - "xform/' /'/"

punctuator:
  import_preset: default

key_binder:
  import_preset: default

recognizer:
  import_preset: default


__patch:
  # é»˜èªä½ˆå±€ï¼šä¸ƒæŒ‡ç¦ª
  # - combo_pinyin_layouts:/use_pc_layout
  # è§£å°ä¸‹åˆ—ä»£ç¢¼ï¼Œé¸ç”¨å…¶ä»–ä½ˆå±€é¸é …
  # ä¸ƒæŒ‡ç¦ªï¼Œé‹ç”¨ç¸®ç•¥ç¢¼
  # - combo_pinyin_layouts:/use_pc_layout_with_briefs
  # å…«æŒ‡ç¦ªï¼Œé»˜èªé…ç½®ï¼šå­—æ¯ A = å®®ä¿æ‹¼éŸ³ç¢¼ H
  - combo_pinyin_layouts:/use_split_layout
  # å…«æŒ‡ç¦ªï¼Œå¯é¸é…ç½®ï¼šè¨­å®šå·¦æ‰‹æ‹‡æŒ‡ä½ H çš„éµç¢¼
  # - combo_pinyin_layouts:/use_semicolon
  # - combo_pinyin_layouts:/use_apostrophe
  - combo_pinyin_layouts:/use_control
  # - combo_pinyin_layouts:/use_alt
  # - combo_pinyin_layouts:/use_shift

  # ä½¿ç”¨å…«è‚¡æ–‡èªè¨€æ¨¡å‹
  - grammar:/hans?

  # ç”¨å®¶è‡ªé¸é…ç½®
  - combo_pinyin.custom:/patch?
  # emoji kaomoji è½¬æ¢
  - emoji:/emoji?
  - kaomoji:/kaomoji?
  - traditionalize:/traditionalize?
