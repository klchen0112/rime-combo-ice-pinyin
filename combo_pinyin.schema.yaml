# Rime schema
# encoding: utf-8

schema:
  schema_id: combo_pinyin
  name: å®®ä¿æ‹¼éŸ³
  version: "2.0"
  author:
    - å±…æˆæ° <chen.sst@gmail.com>
  description: |
    ä¸¦æ“Šè¼¸å…¥æ‹¼éŸ³
    https://github.com/rime/home/wiki/ComboPinyin
  dependencies:
    - rime_ice

switches:
  - name: ascii_mode
    reset: 0
    states: [ä¸­æ–‡, è¥¿æ–‡]
  - name: full_shape
    states: [åŠè§’, å…¨è§’]
  - name: traditionalization
    states: [ç®€, ç¹]
    reset: 0
  - name: ascii_punct
    states: [ã€‚ï¼Œ, ï¼ï¼Œ]
  - name: emoji
    states: [ğŸ’€, ğŸ˜„]
    reset: 1
  - name: search_single_char  # search.lua çš„åŠŸèƒ½å¼€å…³ï¼Œè¾…ç æŸ¥è¯æ—¶æ˜¯å¦å•å­—ä¼˜å…ˆ
    abbrev: [è¯, å•]
    states: [æ­£å¸¸, å•å­—]
engine:
  processors:
    - lua_processor@select_character          # ä»¥è¯å®šå­—
    - ascii_composer
    - recognizer
    - chord_composer # å¯¦ç¾ä¸¦æ“ŠæŒ‰éµè™•ç†
    - key_binder
    - speller
    - punctuator
    - selector
    - navigator
    - express_editor
  segmentors:
    - ascii_segmentor
    - matcher
    - abc_segmentor
    - punct_segmentor
    - fallback_segmentor
  translators:
    - punct_translator
    - script_translator
  filters:
    - lua_filter@long_word_filter                   # é•¿è¯ä¼˜å…ˆï¼ˆé¡ºåºè¦æ±‚ï¼šé•¿è¯ä¼˜å…ˆ > Emojiï¼‰
    - simplifier@traditionalize # ç®€ç¹åˆ‡æ¢
    - simplifier@emoji # Emoji
    - uniquifier

chord_composer:

editor:
  bindings:
    BackSpace: back_syllable

# Lua é…ç½®ï¼šé•¿è¯ä¼˜å…ˆ
# æå‡ count ä¸ªè¯è¯­ï¼Œæ’å…¥åˆ°ç¬¬ idx ä¸ªä½ç½®ã€‚
# ç¤ºä¾‹ï¼šå°† 2 ä¸ªè¯æ’å…¥åˆ°ç¬¬ 4ã€5 ä¸ªå€™é€‰é¡¹ï¼Œè¾“å…¥ jie å¾—åˆ°ã€Œ1æ¥ 2è§£ 3å§ 4é¥¥é¥¿ 5ææ¶ã€
long_word_filter:
  count: 2
  idx: 4

# ç®€ç¹åˆ‡æ¢
traditionalize:
  option_name: traditionalization
  opencc_config: s2t.json  # s2t.json | s2hk.json | s2tw.json | s2twp.json
  tips: none               # è½¬æ¢æç¤º: all éƒ½æ˜¾ç¤º | char ä»…å•å­—æ˜¾ç¤º | none ä¸æ˜¾ç¤ºã€‚
  tags: [ abc, number, gregorian_to_lunar ]  # é™åˆ¶åœ¨å¯¹åº” tagï¼Œä¸å¯¹å…¶ä»–å¦‚åæŸ¥çš„å†…å®¹åšç®€ç¹è½¬æ¢

speller:
  alphabet: "zyxwvutsrqponmlkjihgfedcba'"
  initials: "zyxwvutsrqponmlkjihgfedcba"
  delimiter: " "
  algebra:
    # æ‹¼éŸ³éŸ³ç¯€ä¸€å¾‹å¾ŒåŠ éš”éŸ³ç¬¦è™Ÿï¼Œé¿å…éŸ³ç¯€åˆ‡åˆ†æ­§ç¾©
    - "xform/^([a-z]+)$/$1'/"

translator:
  dictionary: rime_ice
  prism: combo_pinyin
  preedit_format:
    - xform/([nl])v/$1Ã¼/
    - xform/([nl])ue/$1Ã¼e/
    - xform/([jqxy])v/$1u/
    - "xform/' /'/"

punctuator:
  import_preset: default

key_binder:
  import_preset: default

recognizer:
  import_preset: default

# Emoji
emoji:
  option_name: emoji
  opencc_config: emoji.json

# ç®€ç¹åˆ‡æ¢
traditionalize:
  option_name: traditionalization
  opencc_config: s2t.json # s2t.json | s2hk.json | s2tw.json | s2twp.json
  tips: none # è½¬æ¢æç¤º: all éƒ½æ˜¾ç¤º | char ä»…å•å­—æ˜¾ç¤º | none ä¸æ˜¾ç¤ºã€‚
  tags: [abc, number, gregorian_to_lunar] # é™åˆ¶åœ¨å¯¹åº” tagï¼Œä¸å¯¹å…¶ä»–å¦‚åæŸ¥çš„å†…å®¹åšç®€ç¹è½¬æ¢

__patch:
  # é»˜èªä¸ƒæŒ‡ç¦ªï¼ˆå¤§è¡†å¼ï¼‰
  # - combo_pinyin_layouts:/use_gia_layout
  # è§£å°ä¸‹åˆ—ä»£ç¢¼ï¼Œé¸ç”¨å…¶ä»–ä½ˆå±€é¸é …
  # å…«æŒ‡ç¦ªï¼Œé»˜èªå­—æ¯A = h
  - combo_pinyin_layouts:/use_zhia_layout
  #- combo_pinyin_layouts:/use_zhia_engrammer_layout
  # å…«æŒ‡ç¦ªï¼šé¸å®šå·¦æ‰‹æ‹‡æŒ‡ h éµ
  # - combo_pinyin_layouts:/use_semicolon
  # - combo_pinyin_layouts:/use_apostrophe
  - combo_pinyin_layouts:/use_control
  # - combo_pinyin_layouts:/use_alt
  # - combo_pinyin_layouts:/use_shift
  # ä¹æŒ‡ç¦ª
  # - combo_pinyin_layouts:/use_gya_layout
  # åæŒ‡ç¦ªï¼Œå·¦ã€å³æ‹‡æŒ‡éµè¨­çˆ²ï¼šç©ºæ ¼éµã€å–®å¼•è™Ÿéµ
  # - combo_pinyin_layouts:/use_gywa_layout
  # åæŒ‡ç¦ªÂ·Emacsç”¨å®¶ï¼Œå·¦ã€å³æ‹‡æŒ‡éµè¨­çˆ²ï¼šControléµã€ç©ºæ ¼éµ
  # - combo_pinyin_layouts:/use_gywa_emacsen_layout

  # ä½¿ç”¨å…«è‚¡æ–‡èªè¨€æ¨¡å‹
  - grammar:/hans?

  # ç”¨å®¶è‡ªé¸é…ç½®
  - combo_pinyin.custom:/patch?
